---
source: xee-qt/src/load.rs
expression: "qt::TestSet::load_from_xml(&mut xot, &PathBuf::from(\"qt/fn/test.xml\"),\n        PARAMS_FIXTURE).unwrap()"
---
TestSet {
    full_path: "qt/fn/test.xml",
    name: "misc-UCACollation",
    descriptions: [
        "Params",
    ],
    dependencies: Dependencies {
        dependencies: [
            Dependency {
                spec: DependencySpec {
                    type_: "spec",
                    value: "XP31+",
                },
                satisfied: true,
            },
            Dependency {
                spec: DependencySpec {
                    type_: "spec",
                    value: "XQ31+",
                },
                satisfied: true,
            },
            Dependency {
                spec: DependencySpec {
                    type_: "spec",
                    value: "XT30+",
                },
                satisfied: true,
            },
        ],
    },
    shared_environments: SharedEnvironments {
        environments: {
            "UCA-collation": EnvironmentSpec {
                base_dir: "qt/fn",
                schemas: [],
                sources: [],
                resources: [],
                params: [
                    Param {
                        name: OwnedName {
                            local_name_str: "collation",
                            namespace_str: "",
                            prefix_str: "",
                        },
                        select: Some(
                            "'http://www.w3.org/2013/collation/UCA?'",
                        ),
                        as_: None,
                        source: None,
                        declared: false,
                    },
                ],
                context_items: [],
                decimal_formats: [],
                namespaces: [],
                function_libraries: [],
                collections: [],
                static_base_uris: [],
                collations: [],
            },
            "UCA-collation.en": EnvironmentSpec {
                base_dir: "qt/fn",
                schemas: [],
                sources: [],
                resources: [],
                params: [
                    Param {
                        name: OwnedName {
                            local_name_str: "collation",
                            namespace_str: "",
                            prefix_str: "",
                        },
                        select: Some(
                            "'http://www.w3.org/2013/collation/UCA?lang=en;'",
                        ),
                        as_: None,
                        source: None,
                        declared: false,
                    },
                ],
                context_items: [],
                decimal_formats: [],
                namespaces: [],
                function_libraries: [],
                collections: [],
                static_base_uris: [],
                collations: [],
            },
            "UCA-collation.en.primary": EnvironmentSpec {
                base_dir: "qt/fn",
                schemas: [],
                sources: [],
                resources: [],
                params: [
                    Param {
                        name: OwnedName {
                            local_name_str: "collation",
                            namespace_str: "",
                            prefix_str: "",
                        },
                        select: Some(
                            "'http://www.w3.org/2013/collation/UCA?lang=en;strength=primary;'",
                        ),
                        as_: None,
                        source: None,
                        declared: false,
                    },
                ],
                context_items: [],
                decimal_formats: [],
                namespaces: [],
                function_libraries: [],
                collections: [],
                static_base_uris: [],
                collations: [],
            },
            "empty": EnvironmentSpec {
                base_dir: "",
                schemas: [],
                sources: [],
                resources: [],
                params: [],
                context_items: [],
                decimal_formats: [],
                namespaces: [],
                function_libraries: [],
                collections: [],
                static_base_uris: [],
                collations: [],
            },
        },
    },
    test_cases: [
        TestCase {
            name: "UCA-collation-001",
            metadata: Metadata {
                description: Some(
                    "unknown fallback",
                ),
                created: Some(
                    Attribution {
                        by: "John Lumley",
                        on: "2014-05-02",
                    },
                ),
                modified: [
                    Modification {
                        attribution: Attribution {
                            by: "Michael Kay",
                            on: "2015-12-02",
                        },
                        description: "allow success: effect of unknown values is implementation-defined. Bug 29308.",
                    },
                ],
            },
            environments: [
                Ref(
                    EnvironmentRef {
                        ref_: "UCA-collation",
                    },
                ),
            ],
            dependencies: Dependencies {
                dependencies: [],
            },
            modules: [],
            test: "compare('abc','aBC',concat($collation,'fallback=unknown'))",
            result: AnyOf(
                AssertAnyOf(
                    [
                        AssertError(
                            AssertError(
                                "FOCH0002",
                            ),
                        ),
                        AssertEq(
                            AssertEq(
                                XPathExpr(
                                    "0",
                                ),
                            ),
                        ),
                        AssertEq(
                            AssertEq(
                                XPathExpr(
                                    "-1",
                                ),
                            ),
                        ),
                        AssertEq(
                            AssertEq(
                                XPathExpr(
                                    "1",
                                ),
                            ),
                        ),
                    ],
                ),
            ),
        },
    ],
}
